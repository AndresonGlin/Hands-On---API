# ğŸ® API Mundo Geek

Este repositÃ³rio contÃ©m a **API de Gerenciamento da Loja Mundo Geek**, desenvolvida em **Node.js + TypeScript**, utilizando **Express**, **TypeORM**, **PostgreSQL** e **Zod** para validaÃ§Ã£o de dados.

A aplicaÃ§Ã£o foi construÃ­da seguindo o padrÃ£o de **Arquitetura em Camadas**, garantindo organizaÃ§Ã£o, escalabilidade e fÃ¡cil manutenÃ§Ã£o.

---

## ğŸ”„ Fluxo da RequisiÃ§Ã£o

1. **Middlewares (Zod)**  
   ValidaÃ§Ã£o do contrato da requisiÃ§Ã£o (tipos, campos obrigatÃ³rios e regras de negÃ³cio bÃ¡sicas).

2. **Controllers**  
   ResponsÃ¡veis apenas pela comunicaÃ§Ã£o HTTP (req / res).

3. **Services**  
   ContÃªm as regras de negÃ³cio da aplicaÃ§Ã£o, como:
   - Verificar se a categoria existe antes de criar um produto.
   - LanÃ§ar erros padronizados.

4. **Repositories (TypeORM)**  
   Camada de acesso a dados, responsÃ¡vel pela persistÃªncia no PostgreSQL.

---

## ğŸš€ DecisÃµes de Design e Tecnologias

1. **TypeScript**  
   Escolhido para trazer tipagem estÃ¡tica ao Node.js, reduzindo erros em tempo de execuÃ§Ã£o e melhorando a manutenÃ§Ã£o do cÃ³digo.

2. **TypeORM (Data Mapper Pattern):**  
   Optamos pelo uso de Entidades e Repositories para gerenciar o relacionamento 1:N entre Categorias e Produtos de forma eficiente e segura.

3. **Zod**  
   Implementado para garantir a integridade dos dados antes mesmo de chegarem ao Service, evitando que dados "sujos" sobrecarreguem o banco de dados

4. **AppError (Custom Error Handling):**  
   Criamos uma classe de erro personalizada para padronizar as respostas de erro da API (400, 404, 500), melhorando a experiÃªncia de quem consome a API.

---

## ğŸ› ï¸ DivisÃ£o de Responsabilidades

1. **Entities**  
   Define a estrutura das tabelas e os relacionamentos (1:N).

2. **Validates (Zod)**  
   Define os esquemas de validaÃ§Ã£o (ex: preÃ§o deve ser > 0).

3. **Controllers**  
   Isolam o Express da lÃ³gica de negÃ³cio. Apenas recebem req e retornam res.

4. **Services:**  
   Camada "cÃ©rebro". Valida se a categoria existe antes de criar um produto e lida com erros de negÃ³cio.

5. **Middlewares:**  
   Executam funÃ§Ãµes transversais, como o tratamento global de erros e logs (Winston).

6. **Routes:**  
   Endpoints utilizados pelo cliente usufluir dos serviÃ§o.

---

## ğŸš€ Passo a passo para execuÃ§Ã£o do projeto

### 1ï¸âƒ£ Clonar o repositÃ³rio

```bash
git clone https://github.com/AndresonGlin/Hands-On---API.git
```

---

### 2ï¸âƒ£ Acessar a pasta da API

```bash
cd api_geek
```

---

### 3ï¸âƒ£ Inicializar o projeto Node.js

```bash
npm init -y
```

---

### 4ï¸âƒ£ Instalar as dependÃªncias

#### 4.1 DependÃªncias de produÃ§Ã£o

```bash
npm install
```

### 5ï¸âƒ£ Configurar o TypeScript

#### 5.1 Criar o arquivo `tsconfig.json`

```bash
npx tsc --init
```

#### 5.2 Substituir o conteÃºdo do `tsconfig.json` pelo cÃ³digo abaixo

```json
{
  "compilerOptions": {
    "module": "nodenext",
    "target": "esnext",
    "types": [],
    "emitDecoratorMetadata": true,
    "experimentalDecorators": true,
    "strictPropertyInitialization": false,
    "sourceMap": true,
    "declaration": true,
    "declarationMap": true,
    "noUncheckedIndexedAccess": true,
    "exactOptionalPropertyTypes": true,
    "strict": true,
    "jsx": "react-jsx",
    "verbatimModuleSyntax": true,
    "isolatedModules": true,
    "noUncheckedSideEffectImports": true,
    "moduleDetection": "force",
    "skipLibCheck": true
  }
}
```

---

### 6ï¸âƒ£ Ajustar o `package.json`

#### 6.1 Scripts

Adicione ou ajuste os scripts:

```json
"scripts": {
  "dev": "nodemon --watch src --ext ts,json --exec tsx src/server.ts",
  "start": "node dist/server.js"
}
```

#### 6.2 Definir o tipo de mÃ³dulo

```json
"type": "module"
```

---

### 7ï¸âƒ£ Configurar variÃ¡veis de ambiente (`.env`)

Crie um arquivo `.env` na raiz do projeto com o seguinte modelo:

```env
DB_PORT=5433
DB_HOST=********
DB_USER=********
DB_PASS=********
DB_NAME=********
```

> â„¹ï¸ **ObservaÃ§Ã£o:** neste caso, o PostgreSQL jÃ¡ estÃ¡ instalado localmente, por isso a porta foi ajustada para `5433`.

---

## â–¶ï¸ Executando o projeto

Para rodar a aplicaÃ§Ã£o em modo desenvolvimento:

```bash
npm run dev
```

---

## ğŸ› ï¸ Tecnologias utilizadas

- Node.js
- TypeScript
- Express
- TypeORM
- PostgreSQL
- Nodemon
- TSX
- Docker (necessÃ¡rio baixar as imagens do Postgres e pgAdmin)
---

## ğŸ“Œ ObservaÃ§Ãµes finais

Este projeto Ã© voltado para fins educacionais e prÃ¡tica de configuraÃ§Ã£o de uma API moderna com TypeScript e banco de dados relacional.

Sinta-se Ã  vontade para evoluir a estrutura, adicionar entidades, rotas e regras de negÃ³cio ğŸš€

